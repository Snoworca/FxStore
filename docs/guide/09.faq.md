---
name: 자주 묻는 질문
description: FxStore에 대해 자주 묻는 질문과 답변
---

# 자주 묻는 질문 (FAQ)

## 일반

### FxStore는 어떤 용도로 사용하나요?

FxStore는 **임베디드 영속 저장소**입니다. 다음 용도에 적합합니다:
- 로컬 데이터 캐시
- 애플리케이션 설정 저장
- 로그/이벤트 저장
- 작업 큐
- 간단한 데이터베이스 대체

### 멀티스레드에서 사용할 수 있나요?

**부분적으로** 가능합니다:
- **쓰기**: 단일 스레드에서만 수행 (내부 Write Lock으로 보호)
- **읽기**: 여러 스레드에서 동시 읽기 가능 (Wait-free)
- **읽기 트랜잭션**: 스레드별로 별도 트랜잭션 사용

```java
// 권장 패턴
FxStore store = FxStore.open(path);

// 쓰기는 synchronized 또는 단일 스레드
synchronized (store) {
    map.put(key, value);
}

// 읽기 트랜잭션은 스레드별로
try (FxReadTransaction tx = store.beginRead()) {
    value = tx.get(map, key);
}
```

### 최대 저장 용량은 얼마인가요?

이론적으로 **파일 시스템 한계**까지입니다. 실제로는:
- 수백 GB까지 테스트됨
- 수백만~수천만 레코드 처리 가능
- 메모리 모드는 JVM 힙 크기에 제한

### 네트워크 스토리지(NFS, SMB)에서 사용할 수 있나요?

**권장하지 않습니다**:
- 파일 잠금이 네트워크에서 불안정
- 지연 시간으로 성능 저하
- 크래시 일관성 보장 어려움

로컬 디스크 사용을 권장합니다.

## 데이터

### 데이터 암호화를 지원하나요?

내장 암호화는 **지원하지 않습니다**. 다음 대안을 고려하세요:
- 커스텀 코덱에서 암호화/복호화 구현
- 암호화된 파일 시스템 사용
- 애플리케이션 레벨 암호화

### 백업은 어떻게 하나요?

1. **파일 복사** (Store 닫힌 상태)
   ```bash
   cp data.fx data.fx.backup
   ```

2. **compactTo() 사용** (Store 열린 상태)
   ```java
   store.commit();  // BATCH 모드인 경우
   store.compactTo(Paths.get("backup.fx"));
   ```

### 데이터 복구가 가능한가요?

- **정상 종료 후**: 항상 복구 가능
- **비정상 종료 후**: 마지막 커밋 시점으로 복구
- **파일 손상**: `verify()`로 확인 후 부분 복구 시도

### null 키/값을 저장할 수 있나요?

**아니요**. null 키와 null 값 모두 지원하지 않습니다.
```java
map.put(null, "value");  // NullPointerException
map.put(1L, null);       // NullPointerException
```

## 성능

### AUTO 모드와 BATCH 모드 중 어떤 것이 좋나요?

| 상황 | 권장 |
|------|------|
| 실시간 저장 | AUTO |
| 대량 삽입 | BATCH |
| 롤백 필요 | BATCH |
| 최대 안전성 | AUTO |

### 얼마나 빠른가요?

환경에 따라 다르지만, 일반적으로:
- **쓰기**: AUTO 모드 ~1만 ops/sec, BATCH 모드 ~100만 ops/sec
- **읽기**: 캐시 히트 시 ~수백만 ops/sec

### 페이지 크기는 어떻게 선택하나요?

| 값 크기 | 권장 페이지 |
|--------|------------|
| < 500바이트 | 4K (기본) |
| 500B ~ 2KB | 8K |
| 2KB ~ 8KB | 16K |
| > 8KB | 32K 이상 |

## 호환성

### Java 버전 요구사항은?

**Java 8** 이상. Java 8 ~ 21 테스트됨.

### Android에서 사용할 수 있나요?

이론적으로 가능하지만 **공식 지원은 아닙니다**.
- 파일 시스템 접근 필요
- 메모리 제약 고려

### 다른 언어에서 사용할 수 있나요?

**아니요**. Java 전용 라이브러리입니다.
파일 포맷은 문서화되지 않았으며 호환성 보장 없음.

## 문제 해결

### "Collection not found" 오류

```java
// 오류
NavigableMap<Long, String> map = store.openMap("users", Long.class, String.class);

// 해결: createOrOpen 사용
NavigableMap<Long, String> map = store.createOrOpenMap("users", Long.class, String.class);
```

### "Store is closed" 오류

Store가 닫힌 후 사용하려 했습니다:
```java
store.close();
map.put(1L, "value");  // IllegalStateException

// 해결: Store 열린 상태에서만 사용
```

### 메모리 부족 오류

```java
// 캐시 크기 줄이기
FxOptions options = FxOptions.defaults()
    .withCacheBytes(32 * 1024 * 1024)  // 32MB로 감소
    .build();

// BATCH 모드에서 주기적 커밋
for (...) {
    map.put(key, value);
    if (i % 10000 == 0) store.commit();  // 버퍼 비우기
}
```

## 기타

### 라이센스는?

[프로젝트 라이센스 확인 필요]

### 버그 리포트는 어디에?

GitHub Issues에 제출해 주세요.

### 상용 지원이 있나요?

[지원 정보 확인 필요]
