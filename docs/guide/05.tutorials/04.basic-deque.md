---
name: Deque 사용하기
description: Deque 생성, 양방향 추가/제거, Stack/Queue 패턴 튜토리얼
---

# Tutorial 04: Deque 사용하기

> **예상 시간**: 10분
> **난이도**: 초급
> **선행 조건**: [Map 튜토리얼](01.basic-map.md)

## 학습 목표

- Deque 생성/열기
- 앞/뒤 추가 및 제거
- Stack(LIFO) 패턴 활용
- Queue(FIFO) 패턴 활용

## 1. Deque 생성 및 기본 연산

```java
import com.snoworca.fxstore.api.FxStore;
import java.nio.file.Paths;
import java.util.Deque;

public class DequeBasics {
    public static void main(String[] args) {
        FxStore store = FxStore.open(Paths.get("tasks.fx"));

        // Deque 생성
        Deque<String> tasks = store.createOrOpenDeque("tasks", String.class);

        // 뒤에 추가
        tasks.addLast("Task 1");
        tasks.addLast("Task 2");

        // 앞에 추가
        tasks.addFirst("Urgent Task");

        // 현재 상태: [Urgent Task, Task 1, Task 2]

        // 앞/뒤 조회 (제거 안함)
        String first = tasks.peekFirst();  // "Urgent Task"
        String last = tasks.peekLast();    // "Task 2"

        store.close();
    }
}
```

## 2. 추가 메서드

```java
Deque<String> deque = store.createOrOpenDeque("items", String.class);

// addFirst/addLast - 실패 시 예외
deque.addFirst("First");
deque.addLast("Last");

// offerFirst/offerLast - 실패 시 false 반환
deque.offerFirst("Offered First");
deque.offerLast("Offered Last");

// push - Stack 스타일 (앞에 추가)
deque.push("Pushed");
```

## 3. 제거 메서드

```java
// removeFirst/removeLast - 비어있으면 예외
String first = deque.removeFirst();
String last = deque.removeLast();

// pollFirst/pollLast - 비어있으면 null
String polledFirst = deque.pollFirst();
String polledLast = deque.pollLast();

// pop - Stack 스타일 (앞에서 제거)
String popped = deque.pop();
```

## 4. Queue 패턴 (FIFO)

**선입선출**: 먼저 들어온 것이 먼저 나감

```java
Deque<String> queue = store.createOrOpenDeque("queue", String.class);

// 뒤에서 추가 (입구)
queue.addLast("Job 1");
queue.addLast("Job 2");
queue.addLast("Job 3");

// 앞에서 제거 (출구)
while (!queue.isEmpty()) {
    String job = queue.pollFirst();
    System.out.println("Processing: " + job);
}
// 출력:
// Processing: Job 1
// Processing: Job 2
// Processing: Job 3
```

## 5. Stack 패턴 (LIFO)

**후입선출**: 나중에 들어온 것이 먼저 나감

```java
Deque<String> stack = store.createOrOpenDeque("stack", String.class);

// push (앞에 추가)
stack.push("Page 1");
stack.push("Page 2");
stack.push("Page 3");

// pop (앞에서 제거)
while (!stack.isEmpty()) {
    String page = stack.pop();
    System.out.println("Back to: " + page);
}
// 출력:
// Back to: Page 3
// Back to: Page 2
// Back to: Page 1
```

## 6. 크기 및 검색

```java
Deque<String> items = store.createOrOpenDeque("items", String.class);
items.addLast("A");
items.addLast("B");
items.addLast("C");

// 크기
int size = items.size();  // 3

// 비어있는지
boolean empty = items.isEmpty();  // false

// 포함 여부
boolean hasB = items.contains("B");  // true

// 순회
for (String item : items) {
    System.out.println(item);
}
```

## 전체 예제: 작업 큐

```java
import com.snoworca.fxstore.api.FxStore;
import java.nio.file.Paths;
import java.util.Deque;

public class TaskQueue {
    public static void main(String[] args) {
        FxStore store = FxStore.open(Paths.get("task_queue.fx"));

        Deque<String> tasks = store.createOrOpenDeque("tasks", String.class);

        // 작업 추가
        tasks.addLast("Send email");
        tasks.addLast("Generate report");
        tasks.addLast("Backup database");

        // 긴급 작업 (맨 앞에)
        tasks.addFirst("Fix critical bug");

        System.out.println("Total tasks: " + tasks.size());

        // 작업 처리
        while (!tasks.isEmpty()) {
            String task = tasks.pollFirst();
            System.out.println("Processing: " + task);
            // 실제로는 여기서 작업 수행
        }

        store.close();
    }
}
```

## 전체 예제: 브라우저 히스토리 (Stack)

```java
import com.snoworca.fxstore.api.FxStore;
import java.nio.file.Paths;
import java.util.Deque;

public class BrowserHistory {
    public static void main(String[] args) {
        FxStore store = FxStore.open(Paths.get("history.fx"));

        Deque<String> history = store.createOrOpenDeque("history", String.class);

        // 페이지 방문
        history.push("google.com");
        history.push("github.com");
        history.push("stackoverflow.com");

        // 현재 페이지
        System.out.println("Current: " + history.peekFirst());

        // 뒤로가기
        String current = history.pop();
        System.out.println("Going back from: " + current);
        System.out.println("Now at: " + history.peekFirst());

        store.close();
    }
}
```

## 다음 단계

- [BATCH 모드](05.batch-mode.md): 배치 처리
- [읽기 트랜잭션](06.read-transaction.md): 일관된 읽기
