---
name: FxStore 튜토리얼 계획
description: 단계별 튜토리얼 8개의 상세 구성 계획
---

# 튜토리얼 구성 계획

## 1. 튜토리얼 개요

| 번호 | 제목 | 난이도 | 시간 | 선행 조건 |
|------|------|--------|------|----------|
| 01 | Map 사용하기 | 초급 | 10분 | Quick Start |
| 02 | Set 사용하기 | 초급 | 10분 | 01 |
| 03 | List 사용하기 | 초급 | 10분 | 01 |
| 04 | Deque 사용하기 | 초급 | 10분 | 01 |
| 05 | BATCH 모드 | 중급 | 15분 | 01-04 |
| 06 | 읽기 트랜잭션 | 중급 | 15분 | 05 |
| 07 | 커스텀 코덱 | 고급 | 20분 | 01-06 |
| 08 | 성능 튜닝 | 고급 | 20분 | 01-07 |

## 2. 튜토리얼 상세 설계

### 2.1 Tutorial 01: Map 사용하기

**학습 목표**:
- NavigableMap 생성/열기
- CRUD 연산 (put, get, remove)
- 범위 조회 (subMap, headMap, tailMap)
- 정렬 순서 활용

**코드 예제**:
```java
// 1. Store 열기
FxStore store = FxStore.open(Paths.get("users.fx"));

// 2. Map 생성
NavigableMap<Long, String> users = store.createOrOpenMap(
    "users", Long.class, String.class);

// 3. 데이터 추가
users.put(1L, "Alice");
users.put(2L, "Bob");
users.put(3L, "Charlie");

// 4. 조회
String user = users.get(1L);  // "Alice"

// 5. 범위 조회
NavigableMap<Long, String> range = users.subMap(1L, true, 2L, true);

// 6. 정렬 순서
Long firstKey = users.firstKey();  // 1L
Long lastKey = users.lastKey();    // 3L

// 7. Store 닫기
store.close();
```

### 2.2 Tutorial 02: Set 사용하기

**학습 목표**:
- NavigableSet 생성/열기
- 요소 추가/제거
- 존재 여부 확인
- 범위 조회

**코드 예제**:
```java
FxStore store = FxStore.open(Paths.get("tags.fx"));

NavigableSet<String> tags = store.createOrOpenSet("tags", String.class);

// 추가
tags.add("java");
tags.add("database");
tags.add("persistence");

// 확인
boolean hasJava = tags.contains("java");  // true

// 범위
NavigableSet<String> subset = tags.subSet("a", "j");

// 첫 번째/마지막
String first = tags.first();  // "database"
String last = tags.last();    // "persistence"

store.close();
```

### 2.3 Tutorial 03: List 사용하기

**학습 목표**:
- List 생성/열기
- 인덱스 기반 접근
- 추가/삭제

**코드 예제**:
```java
FxStore store = FxStore.open(Paths.get("logs.fx"));

List<String> logs = store.createOrOpenList("logs", String.class);

// 추가
logs.add("Started");
logs.add("Processing");
logs.add("Completed");

// 인덱스 접근
String first = logs.get(0);  // "Started"

// 크기
int size = logs.size();  // 3

store.close();
```

### 2.4 Tutorial 04: Deque 사용하기

**학습 목표**:
- Deque 생성/열기
- 앞/뒤 추가 (addFirst, addLast)
- 앞/뒤 제거 (pollFirst, pollLast)
- Stack/Queue로 활용

**코드 예제**:
```java
FxStore store = FxStore.open(Paths.get("queue.fx"));

Deque<String> tasks = store.createOrOpenDeque("tasks", String.class);

// Queue로 사용 (FIFO)
tasks.addLast("Task1");
tasks.addLast("Task2");
String next = tasks.pollFirst();  // "Task1"

// Stack으로 사용 (LIFO)
tasks.addFirst("Urgent");
String top = tasks.pollFirst();  // "Urgent"

store.close();
```

### 2.5 Tutorial 05: BATCH 모드

**학습 목표**:
- AUTO vs BATCH 모드 차이
- 명시적 commit()
- rollback() 사용
- 트랜잭션 경계 설정

**코드 예제**:
```java
// BATCH 모드로 Store 열기
FxOptions options = FxOptions.defaults()
    .withCommitMode(CommitMode.BATCH)
    .build();
FxStore store = FxStore.open(Paths.get("data.fx"), options);

NavigableMap<Long, String> map = store.createOrOpenMap(
    "data", Long.class, String.class);

try {
    map.put(1L, "Value1");
    map.put(2L, "Value2");

    // 명시적 커밋
    store.commit();
} catch (Exception e) {
    // 롤백
    store.rollback();
}

store.close();
```

### 2.6 Tutorial 06: 읽기 트랜잭션

**학습 목표**:
- FxReadTransaction 시작
- 일관된 읽기 뷰
- 스냅샷 격리

**코드 예제**:
```java
FxStore store = FxStore.open(Paths.get("data.fx"));
NavigableMap<Long, String> users = store.createOrOpenMap(
    "users", Long.class, String.class);

// 읽기 트랜잭션 시작
try (FxReadTransaction tx = store.beginRead()) {
    // 이 블록 내 모든 읽기는 동일 스냅샷
    String user1 = tx.get(users, 1L);
    String user2 = tx.get(users, 2L);

    // 다른 스레드가 users를 수정해도
    // 이 트랜잭션에서는 시작 시점 데이터만 보임
}

store.close();
```

### 2.7 Tutorial 07: 커스텀 코덱

**학습 목표**:
- FxCodec 인터페이스 구현
- 커스텀 타입 저장
- 코덱 등록

**코드 예제**:
```java
// 사용자 정의 타입
public class User {
    public long id;
    public String name;
}

// 커스텀 코덱
public class UserCodec implements FxCodec<User> {
    public static final UserCodec INSTANCE = new UserCodec();

    @Override
    public String id() { return "app:user"; }

    @Override
    public int version() { return 1; }

    @Override
    public byte[] encode(User user) {
        // 직렬화 구현
    }

    @Override
    public User decode(byte[] bytes) {
        // 역직렬화 구현
    }

    @Override
    public int compareBytes(byte[] a, byte[] b) {
        // 바이트 비교 구현
    }

    // equalsBytes, hashBytes 구현...
}

// 사용
FxStore store = FxStore.open(Paths.get("data.fx"));
store.registerCodec(User.class, UserCodec.INSTANCE);

NavigableMap<Long, User> users = store.createOrOpenMap(
    "users", Long.class, User.class);
```

### 2.8 Tutorial 08: 성능 튜닝

**학습 목표**:
- 페이지 크기 최적화
- 캐시 크기 조정
- BATCH 모드 활용
- 대용량 데이터 처리

**코드 예제**:
```java
// 성능 최적화 옵션
FxOptions options = FxOptions.defaults()
    .withPageSize(PageSize.PAGE_16K)    // 대용량 데이터
    .withCacheBytes(256 * 1024 * 1024)  // 256MB 캐시
    .withCommitMode(CommitMode.BATCH)   // 배치 처리
    .withDurability(Durability.ASYNC)   // 비동기 쓰기
    .build();

FxStore store = FxStore.open(Paths.get("large.fx"), options);

// 대량 삽입
NavigableMap<Long, byte[]> data = store.createOrOpenMap(
    "data", Long.class, byte[].class);

for (long i = 0; i < 1_000_000; i++) {
    data.put(i, new byte[1024]);

    // 10만 건마다 커밋
    if (i % 100_000 == 0) {
        store.commit();
    }
}
store.commit();

store.close();
```

## 3. 튜토리얼 작성 원칙

### 3.1 구조
1. 학습 목표 (2-4개)
2. 사전 지식
3. 단계별 설명 + 코드
4. 전체 코드 (복사-붙여넣기용)
5. 연습 문제 (선택)
6. 다음 단계

### 3.2 코드 예제
- 모든 import 포함
- 예외 처리 포함
- 주석으로 각 단계 설명
- 실행 가능한 완전한 코드

### 3.3 설명
- 왜 이렇게 하는지 설명
- 대안이 있으면 언급
- 주의사항 강조
