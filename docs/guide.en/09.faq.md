---
name: Frequently Asked Questions
description: Frequently asked questions and answers about FxStore
---

# Frequently Asked Questions (FAQ)

## General

### What is FxStore used for?

FxStore is an **embedded persistent storage**. It's suitable for:
- Local data caching
- Application configuration storage
- Log/event storage
- Task queues
- Simple database replacement

### Can I use it in multi-threaded environments?

**Partially** yes:
- **Writes**: Only from single thread (protected by internal Write Lock)
- **Reads**: Concurrent reads from multiple threads (Wait-free)
- **Read Transactions**: Use separate transaction per thread

```java
// Recommended pattern
FxStore store = FxStore.open(path);

// Writes with synchronized or single thread
synchronized (store) {
    map.put(key, value);
}

// Read transactions per thread
try (FxReadTransaction tx = store.beginRead()) {
    value = tx.get(map, key);
}
```

### What is the maximum storage capacity?

Theoretically up to **file system limits**. In practice:
- Tested up to hundreds of GB
- Can handle millions to tens of millions of records
- Memory mode limited by JVM heap size

### Can I use it on network storage (NFS, SMB)?

**Not recommended**:
- File locking is unstable over network
- Performance degradation due to latency
- Difficult to guarantee crash consistency

Local disk usage is recommended.

## Data

### Does it support data encryption?

Built-in encryption is **not supported**. Consider these alternatives:
- Implement encryption/decryption in custom codec
- Use encrypted file system
- Application-level encryption

### How do I backup data?

1. **File copy** (with Store closed)
   ```bash
   cp data.fx data.fx.backup
   ```

2. **Use compactTo()** (with Store open)
   ```java
   store.commit();  // If in BATCH mode
   store.compactTo(Paths.get("backup.fx"));
   ```

### Is data recovery possible?

- **After normal shutdown**: Always recoverable
- **After abnormal shutdown**: Recovers to last commit point
- **File corruption**: Check with `verify()` then attempt partial recovery

### Can I store null keys/values?

**No**. Both null keys and null values are not supported.
```java
map.put(null, "value");  // NullPointerException
map.put(1L, null);       // NullPointerException
```

## Performance

### AUTO mode or BATCH mode - which is better?

| Situation | Recommended |
|-----------|-------------|
| Real-time storage | AUTO |
| Bulk insertion | BATCH |
| Rollback needed | BATCH |
| Maximum safety | AUTO |

### How fast is it?

Depends on environment, but generally:
- **Writes**: AUTO mode ~10K ops/sec, BATCH mode ~1M ops/sec
- **Reads**: ~millions ops/sec on cache hit

### How do I choose page size?

| Value Size | Recommended Page |
|-----------|-----------------|
| < 500 bytes | 4K (default) |
| 500B ~ 2KB | 8K |
| 2KB ~ 8KB | 16K |
| > 8KB | 32K or larger |

## Compatibility

### Java version requirements?

**Java 8** or higher. Tested on Java 8 ~ 21.

### Can I use it on Android?

Theoretically possible but **not officially supported**.
- File system access required
- Consider memory constraints

### Can I use it from other languages?

**No**. Java-only library.
File format is not documented and compatibility is not guaranteed.

## Troubleshooting

### "Collection not found" error

```java
// Error
NavigableMap<Long, String> map = store.openMap("users", Long.class, String.class);

// Solution: Use createOrOpen
NavigableMap<Long, String> map = store.createOrOpenMap("users", Long.class, String.class);
```

### "Store is closed" error

Attempted to use Store after closing:
```java
store.close();
map.put(1L, "value");  // IllegalStateException

// Solution: Use only when Store is open
```

### Out of memory error

```java
// Reduce cache size
FxOptions options = FxOptions.defaults()
    .withCacheBytes(32 * 1024 * 1024)  // Reduce to 32MB
    .build();

// Periodic commits in BATCH mode
for (...) {
    map.put(key, value);
    if (i % 10000 == 0) store.commit();  // Flush buffer
}
```

## Other

### What is the license?

[Check project license]

### Where do I report bugs?

Please submit to GitHub Issues.

### Is commercial support available?

[Check support information]
