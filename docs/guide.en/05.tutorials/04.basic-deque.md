---
name: Using Deque
description: Deque creation, bidirectional add/remove, Stack/Queue pattern tutorial
---

# Tutorial 04: Using Deque

> **Estimated Time**: 10 minutes
> **Level**: Beginner
> **Prerequisites**: [Map Tutorial](01.basic-map.md)

## Learning Objectives

- Create/open Deque
- Add and remove from front/back
- Utilize Stack (LIFO) pattern
- Utilize Queue (FIFO) pattern

## 1. Deque Creation and Basic Operations

```java
import com.snoworca.fxstore.api.FxStore;
import java.nio.file.Paths;
import java.util.Deque;

public class DequeBasics {
    public static void main(String[] args) {
        FxStore store = FxStore.open(Paths.get("tasks.fx"));

        // Create Deque
        Deque<String> tasks = store.createOrOpenDeque("tasks", String.class);

        // Add at back
        tasks.addLast("Task 1");
        tasks.addLast("Task 2");

        // Add at front
        tasks.addFirst("Urgent Task");

        // Current state: [Urgent Task, Task 1, Task 2]

        // Peek front/back (no removal)
        String first = tasks.peekFirst();  // "Urgent Task"
        String last = tasks.peekLast();    // "Task 2"

        store.close();
    }
}
```

## 2. Add Methods

```java
Deque<String> deque = store.createOrOpenDeque("items", String.class);

// addFirst/addLast - throws exception on failure
deque.addFirst("First");
deque.addLast("Last");

// offerFirst/offerLast - returns false on failure
deque.offerFirst("Offered First");
deque.offerLast("Offered Last");

// push - Stack style (add at front)
deque.push("Pushed");
```

## 3. Remove Methods

```java
// removeFirst/removeLast - throws exception if empty
String first = deque.removeFirst();
String last = deque.removeLast();

// pollFirst/pollLast - returns null if empty
String polledFirst = deque.pollFirst();
String polledLast = deque.pollLast();

// pop - Stack style (remove from front)
String popped = deque.pop();
```

## 4. Queue Pattern (FIFO)

**First In First Out**: What goes in first comes out first

```java
Deque<String> queue = store.createOrOpenDeque("queue", String.class);

// Add at back (entrance)
queue.addLast("Job 1");
queue.addLast("Job 2");
queue.addLast("Job 3");

// Remove from front (exit)
while (!queue.isEmpty()) {
    String job = queue.pollFirst();
    System.out.println("Processing: " + job);
}
// Output:
// Processing: Job 1
// Processing: Job 2
// Processing: Job 3
```

## 5. Stack Pattern (LIFO)

**Last In First Out**: What goes in last comes out first

```java
Deque<String> stack = store.createOrOpenDeque("stack", String.class);

// push (add at front)
stack.push("Page 1");
stack.push("Page 2");
stack.push("Page 3");

// pop (remove from front)
while (!stack.isEmpty()) {
    String page = stack.pop();
    System.out.println("Back to: " + page);
}
// Output:
// Back to: Page 3
// Back to: Page 2
// Back to: Page 1
```

## 6. Size and Search

```java
Deque<String> items = store.createOrOpenDeque("items", String.class);
items.addLast("A");
items.addLast("B");
items.addLast("C");

// Size
int size = items.size();  // 3

// Is empty
boolean empty = items.isEmpty();  // false

// Contains
boolean hasB = items.contains("B");  // true

// Iterate
for (String item : items) {
    System.out.println(item);
}
```

## Complete Example: Task Queue

```java
import com.snoworca.fxstore.api.FxStore;
import java.nio.file.Paths;
import java.util.Deque;

public class TaskQueue {
    public static void main(String[] args) {
        FxStore store = FxStore.open(Paths.get("task_queue.fx"));

        Deque<String> tasks = store.createOrOpenDeque("tasks", String.class);

        // Add tasks
        tasks.addLast("Send email");
        tasks.addLast("Generate report");
        tasks.addLast("Backup database");

        // Urgent task (at front)
        tasks.addFirst("Fix critical bug");

        System.out.println("Total tasks: " + tasks.size());

        // Process tasks
        while (!tasks.isEmpty()) {
            String task = tasks.pollFirst();
            System.out.println("Processing: " + task);
            // Actually perform task here
        }

        store.close();
    }
}
```

## Complete Example: Browser History (Stack)

```java
import com.snoworca.fxstore.api.FxStore;
import java.nio.file.Paths;
import java.util.Deque;

public class BrowserHistory {
    public static void main(String[] args) {
        FxStore store = FxStore.open(Paths.get("history.fx"));

        Deque<String> history = store.createOrOpenDeque("history", String.class);

        // Visit pages
        history.push("google.com");
        history.push("github.com");
        history.push("stackoverflow.com");

        // Current page
        System.out.println("Current: " + history.peekFirst());

        // Go back
        String current = history.pop();
        System.out.println("Going back from: " + current);
        System.out.println("Now at: " + history.peekFirst());

        store.close();
    }
}
```

## Next Steps

- [BATCH Mode](05.batch-mode.md): Batch processing
- [Read Transactions](06.read-transaction.md): Consistent reads
